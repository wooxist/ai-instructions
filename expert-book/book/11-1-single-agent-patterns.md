# 11-1. 단일 에이전트 패턴 — 고도화된 사용 레시피

목표
- 단일 에이전트로도 충분히 강력한 품질을 달성하는 패턴을 정리한다: 자체 점검, 루브릭 채점, 함수적 출력, 컨텍스트 삽입.

자체 점검(Self-check) 패턴
```text
요청을 수행한 뒤, 출력이 아래 기준을 충족하는지 스스로 점검하라.
기준: 형식(JSON 한 줄), 필수 필드(id, summary, confidence), 금칙어 없음.
충족하지 못하면 스스로 수정한 뒤 최종 결과만 출력하라.
```

루브릭 채점(Rubric-grading) 패턴
```text
루브릭: 정확성, 간결성, 실행가능성(각 0..2점). 총점과 보완점 1줄 작성.
최종 출력은 JSON {score:int, improve:string} 한 줄만.
```

함수적 출력(Function-like output)
- 명령형 글 대신, 파라미터화된 JSON을 반환해 후속 스텝에서 그대로 사용
```json
{"action":"create_issue","title":"주간 요약","labels":["report"],"body":"..."}
```

컨텍스트 삽입(Context Packing)
- 입력 길이를 줄이되 핵심을 보존: 헤더/목차/키워드/최근 변경 요약만 투입
- 예: `scripts/prepare_inputs.py`를 수정해 길이 제한·요약 추출 후 투입

가벼운 모델과의 궁합
- 위 패턴을 사용하면 경량 모델에서도 형식/품질 편차를 줄일 수 있어 비용 절감에 유리

주의: 단계별 사고 과정 자체는 출력하지 않는다. 최종 답만 계약된 포맷으로 출력한다.

연관 챕터
- [06. 입력/출력 계약](06-input-output.md)
- [08. 성능 최적화](08-performance.md)

