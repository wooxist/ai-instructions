instructions.md — 저자 지침(Authors’ Guidelines)

이 문서는 책 집필을 위한 운영 원칙입니다. 산출물(원고)은 `book/` 디렉터리와 `README.md`에만 위치하며, 이 파일에는 지침만 담습니다.

1) 에이전트 설정/자질(한국어 집필 보조)
- 역할: 한국어 기술서 집필 보조(편집·가공·교차참조·검수). 세부 규칙은 2)~11)을 준수합니다.
- 프리셋과 예시는 부록 A를 참고하세요.

2) 기본 원칙(SSOT/SoC/MECE)
- **메타 원칙 준수**: 모든 인스트럭션과 원고는 [4장. 인스트럭션 설계의 메타 원칙](book/04-meta-principles.md)에서 정의한 원칙들을 따릅니다.
  - **구조적 원칙**: SSOT(단일 진실 공급원), SoC(관심사 분리), MECE(상호 배타, 전체 포괄), 원자성(Atomicity)을 준수하여 설계의 뼈대를 세웁니다.
  - **실행 원칙**: 산출물 중심(Output-Driven), 피드백 루프(Feedback Loop), 점진적 개선(Iterative Refinement), 컨텍스트 명시성(Context Explicitness)을 통해 AI와의 협업 방식을 정의합니다.
  - **검증 및 책임 원칙**: 투명성·추적성(Transparency & Traceability), 윤리적 경계(Ethical Boundaries), 인간 참여(Human-in-the-Loop)를 통해 신뢰와 안전성을 확보합니다.
- **SSOT (단일 진실 공급원)**: 모든 지침, 정의, 템플릿의 공식 출처는 이 `instructions.md` 파일과 `README.md`에 둡니다. 본문(`book/`)에서는 독자 이해를 위해 핵심 정의/요약의 제한적 반복을 허용하되, 필요시 원 출처(장/파일)에 상대 링크로 연결합니다.

3) 범위(Scope)
- 포함(In scope): 인스트럭션 설계와 사용 단계 전반(프롬프트/질문 설계, 컨텍스트·형식 지정, 템플릿/체크리스트, 성능 평가·검증, 워크플로우/도구, 조직 적용·표준화, MCP 등 연결 관점).
- 제외(Out of scope): 모델 학습 내부(RLHF, 파인튜닝, 데이터셋 구축·라벨링), 하드웨어/인프라 최적화, 저수준 모델 아키텍처·학습 이론 심화, 법률 자문·규제 해석(일반 원칙 언급만).
- 깊이(Depth): 실무 중심 요약과 예시 제공. 연구·학습 주제는 1–2문장 배경 + 참고 링크로 제한.
 

4) 독자·타깃·톤
- 독자 수준: 고등학생 또는 대학생
- 타깃: 실무 회사원, 예비 창업자, 소규모 스타트업 관리자
- 톤: 명료·친절·실무 친화, 불필요한 전문 용어 자제
- 언어: 한국어(한글)로 집필·대화. 영문 용어는 처음 등장 시 원문 병기 및 번호 각주로 설명.

5) 업데이트 원칙(토론 우선)
- 사용자의 명시적 요청 시에만 원고를 수정합니다.
- 큰 변경은 개요/목차 제안 → 합의 → 본문 수정 순서로 진행합니다.
- 변경 시 요약(무엇/왜/어디)을 남겨 토론을 유도합니다.
- `book/`의 장을 추가/삭제/이동/제목 변경하거나 구조가 바뀌면 `README.md`의 프로젝트 구조/목차/검사 섹션을 즉시 동기화합니다.
- 범위(Scope) 변경은 사전 합의 후 `README.md`의 프로젝트 개요/목적/구조와 동기화합니다.
- **도구 사용 원칙:** 도구를 사용할 때는 각 도구의 파라미터 명세를 반드시 확인한다. 특히 `replace` 도구 사용 시, `new_string`과 `old_string` 파라미터를 정확히 사용했는지 재차 검증하여 `newContent`와 같은 잘못된 파라미터 이름으로 인한 오류를 방지한다.

6) 장(챕터) 서식 규칙
- 제목: `# N장. 제목` (파일명 접두 `NN-`와 일치). 필요시 `# N장 X부: 제목` 형식 사용.
- 머리말: 파트 표기, "목적:" 1문장, "이 장에서 배우는 것" 불릿 목록 포함.
- 본문: `##`/`###`로 계층화, 과도한 중첩 금지
- 구분선: 본문 끝에 `---` 추가.
- 참고 자료/각주: 세부 규칙은 7) 각주·참고 자료를 따릅니다.
- 원칙: 2) 기본 원칙(SSOT/SoC/MECE)을 따릅니다.
- **워크플로우 설계**: 7장. 처리 방법과 워크플로우 설계의 원칙을 따릅니다.
  - **핸드오프(Handoff)**: 에이전트 간 데이터 전달 시, 6장에서 정의한 구조화된 입출력(스키마)을 사용해 안정성을 보장합니다.
  - **실패 처리**: 재시도(Retry), 대체 경로(Fallback) 등 실패 상황에 대한 복원력 설계를 고려합니다.
  - **패턴 활용**: 파이프라인, 생성-검증, 분기 등 상황에 맞는 워크플로우 패턴을 적용합니다.

7) 각주·참고 자료
- 어려운 용어는 번호 각주로 표기: `[^1]`, `[^2]`, …
- 각주의 위치: `## 참고 자료` 섹션 뒤 두 번째 구분선(`---`) 아래(장 말미) 배치
- 참고 자료는 항목 목록으로 표기(각주로 넣지 않음), 가능한 경우 DOI/URL 포함
 - 장 간 중복 허용: 각 장은 독립 문서로 간주하므로, 동일한 참고 자료라도 해당 장의 문맥에 필요하면 중복 표기해도 됩니다(SSOT는 정의/템플릿에 적용, 참고 문헌에는 적용하지 않음).

8) 링크·교차참조
- 장 간 링크는 상대 경로 사용(예: `[2장](02-questions.md)`)
- 1장 말미 “다음으로” 섹션은 큰 재배치 시 업데이트

9) 파일 역할 분리
- `ai-instructions/instructions.md` (이 파일): 모든 집필 지침의 단일 진실 공급원(SSOT).
- `book/`: 책 원고(각 장 마크다운 파일) 및 목차(`index.md`).
- `book/index.md`: 각 장의 주요 소제목(`##` 레벨)을 포함하는 상세 목차(Table of Contents) 역할을 한다. `README.md`의 챕터 목록보다 더 상세할 수 있다.
- `README.md`: 프로젝트/책 개요와 전체 챕터 목록(버전 포함).
- `ROADMAP.md`: 프로젝트의 장기적인 개발 계획.
- `*.md` (최상위): `GEMINI.md`, `CLAUDE.md` 등 각 AI 에이전트별 진입점. 이 파일들은 `instructions.md`를 가리키기만 합니다.
- `workflow.yaml`: 10장의 예시처럼, 다중 에이전트 워크플로우를 정의하는 파일.
- `schemas/`: 10장의 예시처럼, 에이전트 간 입출력 데이터 구조를 정의하는 JSON Schema 파일.

10) 품질 체크리스트(커밋 전)
- 내용(Content)
  - [ ] 3) 범위 준수(Out of scope는 마지막 장 배경지식 또는 링크 처리)
  - [ ] 4) 독자·타깃·톤 부합(언어 규칙 포함)
  - [ ] 2) 기본 원칙 준수: SoC/MECE/SSOT, 원자성, 산출물 중심, Human-in-the-Loop 등 메타 원칙이 적절히 반영되었는가?
- 구조(Structure)
  - [ ] 6) 장 서식 규칙 준수(제목/목적/구분선 형식)
  - [ ] 7) 각주·참고 자료 규칙 준수(위치·번호·정의)
  - [ ] 워크플로우 설계: 에이전트 간 핸드오프가 명확하고, 실패 처리 방안이 고려되었는가?
- 과정(Process)
  - [ ] 5) 업데이트 원칙 준수(요약·합의·수정 흐름)
  - [ ] 8) 링크·교차참조 최신화(`book/index.md`, 본문 교차 링크)
  - [ ] 9) 파일 역할 분리 준수(instructions.md/book/README 역할)
  - [ ] README 프로젝트 구조 목록에 모든 장의 현재 버전·상태 표기 확인
- 자동 검사(Automation)
  - [ ] 스타일 검사 통과: `python3 scripts/check_footnotes.py`

– v1-released 승격 체크리스트(요약)
- [ ] 구성 완료: 상단 “이 장에서 배우는 것(3줄)”, 필요한 경우 “다음으로” 연결
- [ ] 용어/언어: 한국어 중심, 첫 등장 영문 병기+숫자 각주, 어려운 용어 문중 설명
- [ ] 근거 매핑: 사실·일반화 문장에 참고 자료 연결 또는 톤 완화; 참고 자료는 장 말미 목록
- [ ] 예시/안티패턴: 장 성격에 맞는 좋은/나쁜 예 최소 1세트, 흔한 함정·대체 문장 제시
- [ ] 가독성: 문장 간결, 불릿 4–6개 단위, 표/코드 과다 사용 지양, 중복 설명 최소(원 출처 링크)

11) 새 장 템플릿

아래 템플릿은 3장. 좋은 인스트럭션에서 정의한 8가지 핵심 구성 요소를 기반으로 합니다.
```
# NN장. 제목

**1부|2부: 파트명**

**목적:** 이 장에서 독자가 얻게 될 것 한 문장.

## 소제목 A
내용…

## 소제목 B
내용…

---

## 참고 자료
- 저자, 연도. 제목. 링크/DOI

---

# 각주 정의는 여기 작성(숫자 각주). 상세 규칙은 7) 각주·참고 자료를 따릅니다.
```

12) 버전 및 상태 관리(README 중심 표기)
- 장 마크다운 파일 내부에 별도 "상태" 블록을 두지 않습니다.
- 모든 버전/상태 표기는 `README.md`의 "프로젝트 구조" 코드 블록(또는 표)에서만 관리합니다.
- 표기 형식: 파일 설명 끝에 공백 후 `(v{n}-draft)` 또는 `(v{n}-released)`.
  - 예: `01-introduction.md   # 1장: 프롬프트와 인스트럭션 이해하기 (v1-draft)`
- 초기 작성 시 기본값은 `v1-draft`로 시작합니다.
- 의미 있는 개정(학습 목표/구조 대폭 변경, 핵심 예시 전면 교체) 시:
  - README 해당 줄 버전을 n+1로 올리고 상태를 `v{n+1}-draft`로 설정
  - 필요한 본문 수정 후 리뷰 완료 시 `-released`로 전환
- 사소한 수정(오타, 경미한 표현, 링크 교정, 경미한 예시 추가)은 버전/상태 변경 없이 커밋합니다.
- 장의 추가/삭제/이동/이름 변경 또는 버전 증분 시 `book/index.md`도 동기화합니다.
- 자동화(선택): 추후 스크립트에서 README를 파싱해 버전 메타데이터를 수집할 수 있으므로 위 형식을 유지합니다.
- 히스토리는 Git 로그를 통해 추적하며, 장 파일 내에 변경 이력을 기재하지 않습니다.

부록 A) 에이전트 프리셋/예시
- 프리셋 모드
  - 정확 모드: 근거-참조 우선, 보수적 편집, 검수 강화
  - 속도 모드: 구조·표현 정리 중심, 근거는 링크 수준 후속 강화

- 초기 설정 예시(복붙용 시스템/지침)
  "너는 한국어 기술서 집필 보조 에이전트다. 독자 수준과 타깃은 3) 독자·타깃·톤을 따른다. 실무자가 쉽게 이해하도록 쓴다. 어려운 용어는 문장 속 간단 설명과 첫 등장 번호 각주로 처리한다. 각 장 말미에 참고 자료를 두고, 각주는 참고 자료 뒤에 배치한다. 모델 학습 내부(RLHF, 파인튜닝 등)는 본서 범위 밖이며, 필요시 마지막 장 배경지식 섹션으로 간단 연결한다. 장 재배치나 파일명 변경 시 book/index.md, README.md를 동기화한다. 편집 후 scripts/check_footnotes.py로 스타일을 검사한다."
