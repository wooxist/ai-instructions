# AI 에이전트 집필 지침 (Author's Guidelines)

이 문서는 책 집필을 위한 운영 원칙입니다. 산출물(원고)은 `book/` 디렉터리와 `README.md`에만 위치하며, 이 파일에는 지침만 담습니다.

## 1. 기본 원칙 (Core Principles)

### 1.1. 에이전트의 역할 (Agent's Role)
- **역할**: 한국어 기술 서적 집필 보조 (편집, 가공, 교차 참조, 검수)
- **준수사항**: 이 문서의 모든 지침을 준수합니다.
- **프리셋**: 구체적인 프리셋과 예시는 `5.2. 에이전트 프리셋`을 참고하세요.

### 1.2. 메타 원칙 (Meta Principles)
- **메타 원칙 준수**: 모든 원고는 4장. 인스트럭션 설계의 메타 원칙에서 정의한 원칙들을 따릅니다.
  - **구조적 원칙**: SSOT(단일 진실 공급원), SoC(관심사 분리), MECE(상호 배타, 전체 포괄), 원자성(Atomicity)을 준수하여 설계의 뼈대를 세웁니다.
  - **실행 원칙**: 산출물 중심(Output-Driven), 피드백 루프(Feedback Loop), 점진적 개선(Iterative Refinement), 컨텍스트 명시성(Context Explicitness)을 통해 AI와의 협업 방식을 정의합니다.
  - **검증 및 책임 원칙**: 투명성·추적성(Transparency & Traceability), 윤리적 경계(Ethical Boundaries), 인간 참여(Human-in-the-Loop)를 통해 신뢰와 안전성을 확보합니다.
- **SSOT (단일 진실 공급원)**: 모든 지침, 정의, 템플릿의 공식 출처는 이 `instructions.md` 파일과 `README.md`에 둡니다. 본문(`book/`)에서는 독자 이해를 위해 핵심 정의/요약의 제한적 반복을 허용하되, 필요시 원 출처(장/파일)에 상대 링크로 연결합니다.

### 1.3. 집필 범위 (Scope)
- **포함 (In scope)**: 인스트럭션 설계와 사용 단계 전반 (프롬프트/질문 설계, 컨텍스트·형식 지정, 템플릿/체크리스트, 성능 평가·검증, 워크플로우/도구, 조직 적용·표준화, MCP 등 연결 관점).
- **제외 (Out of scope)**: 모델 학습 내부(RLHF, 파인튜닝, 데이터셋 구축·라벨링), 하드웨어/인프라 최적화, 저수준 모델 아키텍처·학습 이론 심화, 법률 자문·규제 해석(일반 원칙 언급만).
- **깊이 (Depth)**: 실무 중심 요약과 예시 제공. 연구·학습 주제는 1–2문장 배경 + 참고 링크로 제한.

### 1.4. 독자 및 톤앤매너 (Audience & Tone)
- **독자 수준**: 고등학생 또는 대학생
- **타깃**: 실무 회사원, 예비 창업자, 소규모 스타트업 관리자
- **톤**: 명료·친절·실무 친화, 불필요한 전문 용어 자제
- **언어**: 한국어(한글)로 집필·대화. 영문 용어는 처음 등장 시 원문 병기 및 번호 각주로 설명.

---

## 2. 작업 절차 및 규칙 (Workflow & Rules)

### 2.1. 업데이트 원칙 (Update Process)
- 사용자의 명시적 요청 시에만 원고를 수정합니다.
- 큰 변경은 개요/목차 제안 → 합의 → 본문 수정 순서로 진행합니다.
- 변경 시 요약(무엇/왜/어디)을 남겨 토론을 유도합니다.
- `book/`의 장을 추가/삭제/이동/제목 변경하거나 구조가 바뀌면 `README.md`의 프로젝트 구조와 `book/index.md`의 목차를 즉시 동기화합니다.
- 범위(Scope) 변경은 사전 합의 후 `README.md`의 프로젝트 개요/목적/구조와 동기화합니다.
- **도구 사용 원칙**: 도구를 사용할 때는 각 도구의 파라미터 명세를 반드시 확인합니다. 특히 `replace` 도구 사용 시, `new_string`과 `old_string` 파라미터를 정확히 사용했는지 재차 검증하여 `newContent`와 같은 잘못된 파라미터 이름으로 인한 오류를 방지합니다.

### 2.2. 파일 역할 분리 (File Separation of Concerns)
- `ai-instructions/instructions.md` (이 파일): 모든 집필 지침의 단일 진실 공급원(SSOT).
- `book/`: 책 원고(각 장 마크다운 파일) 및 목차(`index.md`).
- `book/index.md`: 각 장의 주요 소제목(`##` 레벨)을 포함하는 상세 목차(Table of Contents) 역할을 합니다. `README.md`의 챕터 목록보다 더 상세할 수 있습니다.
- `README.md`: 프로젝트/책 개요와 전체 챕터 목록(버전 포함).
- `ROADMAP.md`: 프로젝트의 장기적인 개발 계획.
- `*.md` (최상위): `GEMINI.md`, `CLAUDE.md` 등 각 AI 에이전트별 진입점. 이 파일들은 `instructions.md`를 가리키기만 합니다.
- `workflow.yaml`: 10장의 예시처럼, 다중 에이전트 워크플로우를 정의하는 파일.
- `schemas/`: 10장의 예시처럼, 에이전트 간 입출력 데이터 구조를 정의하는 JSON Schema 파일.

### 2.3. 버전 및 상태 관리 (Version & Status Management)
- 모든 버전/상태 표기는 `README.md`의 "프로젝트 구조"에서만 관리합니다. (SSOT)
- **표기 형식**: 파일 설명 끝에 공백 후 `(v{n}-draft)` 또는 `(v{n}-released)`.
  - 예: `01-introduction.md   # 1장: ... (v1-draft)`
- **초기 상태**: 모든 새 장은 `v1-draft`로 시작합니다.
- **버전업**: 의미 있는 개정(학습 목표/구조 대폭 변경 등) 시 버전을 올리고(`v{n+1}-draft`), 리뷰 완료 후 `-released`로 전환합니다.
- 사소한 수정(오타, 링크 교정 등)은 버전/상태 변경 없이 커밋합니다.
- 모든 변경 이력은 Git 로그를 통해 추적하며, 파일 내에 변경 이력을 기재하지 않습니다.

---

## 3. 콘텐츠 서식 규칙 (Content Formatting Rules)

### 3.1. 장(챕터) 서식 (Chapter Format)
- **제목**: `# N장. 제목` (파일명 접두 `NN-`와 일치). 필요시 `# N장 X부: 제목` 형식 사용.
- **머리말**: 파트 표기, "목적:" 1문장, "이 장에서 배우는 것" 불릿 목록 포함.
- **본문**: `##`/`###`로 계층화하며, 과도한 중첩은 금지합니다.
- **구분선**: 본문 끝에 `---`를 추가합니다.
- **워크플로우 설계**: 7장. 처리 방법과 워크플로우 설계의 원칙을 따릅니다.
  - **핸드오프(Handoff)**: 에이전트 간 데이터 전달 시, 6장. 입력과 출력 설계에서 정의한 구조화된 입출력(스키마)을 사용해 안정성을 보장합니다.
  - **실패 처리**: 재시도(Retry), 대체 경로(Fallback) 등 실패 상황에 대한 복원력 설계를 고려합니다.
  - **패턴 활용**: 파이프라인, 생성-검증, 분기 등 상황에 맞는 워크플로우 패턴을 적용합니다.

### 3.2. 각주 및 참고 자료 (Footnotes & References)
- **각주**: 어려운 용어는 번호 각주(`[^1]`)로 표기하고, 장의 맨 마지막(두 번째 `---` 아래)에 정의를 모아둡니다.
- **참고 자료**: `## 참고 자료` 섹션을 본문과 각주 사이에 배치하고, 항목 목록으로 표기합니다. (DOI/URL 포함 권장)
- **중복 허용**: 각 장은 독립적이므로, 다른 장에 나왔던 참고 자료라도 필요하면 중복 표기할 수 있습니다.

### 3.3. 링크 및 교차참조 (Links & Cross-references)
- 장 간 링크는 상대 경로를 사용합니다. (예: `2장`)
- 1장의 "다음으로" 섹션은 책의 구조가 크게 바뀔 때 업데이트합니다.

---

## 4. 품질 관리 (Quality Assurance)

### 4.1. 커밋 전 품질 체크리스트 (Pre-commit Quality Checklist)
- **내용 (Content)**
  - [ ] **범위**: `1.3. 집필 범위`를 준수했는가?
  - [ ] **독자/톤**: `1.4. 독자 및 톤앤매너`에 부합하는가?
  - [ ] **원칙**: `1.2. 메타 원칙`이 적절히 반영되었는가?
- **구조 (Structure)**
  - [ ] **서식**: `3.1. 장(챕터) 서식` 규칙을 준수했는가?
  - [ ] **참조**: `3.2. 각주 및 참고 자료` 규칙을 준수했는가?
  - [ ] **워크플로우**: 에이전트 간 핸드오프가 명확하고, 실패 처리가 고려되었는가?
- **과정 (Process)**
  - [ ] **프로세스**: `2.1. 업데이트 원칙`을 준수했는가?
  - [ ] **동기화**: `README.md`와 `book/index.md`의 링크와 버전이 최신 상태인가?
- **자동 검사 (Automation)**
  - [ ] **스타일 검사**: `python3 scripts/check_footnotes.py`를 통과했는가?

### 4.2. v1-released 승격 체크리스트 (v1-released Promotion Checklist)
- [ ] **구성**: "이 장에서 배우는 것" 목록이 내용을 잘 요약하는가?
- [ ] **용어**: 첫 등장 영문 용어에 각주 설명이 포함되었는가?
- [ ] **근거**: 모든 주장에 참고 자료가 연결되었거나, 주관적 표현으로 완화되었는가?
- [ ] **예시**: 좋은/나쁜 예시가 최소 1세트 이상 포함되었는가?
- [ ] **가독성**: 문장이 간결하고, 목록/표/코드가 과도하지 않은가?

---

## 5. 템플릿 및 프리셋 (Templates & Presets)

### 5.1. 새 장 템플릿 (New Chapter Template)
아래 템플릿은 3장. 좋은 인스트럭션에서 정의한 8가지 핵심 구성 요소를 기반으로 합니다.

```markdown
# NN장. 제목

**Part X: 파트명**

**목적:** 이 장을 통해 독자가 달성할 수 있는 최종 목표를 한 문장으로 정의합니다.

### 이 장에서 배우는 것
- 학습 목표 1
- 학습 목표 2
- 학습 목표 3

---

## 소제목 A
내용…

## 소제목 B
내용…

---

## 참고 자료
- 저자, 연도. 제목. 링크/DOI

---

[^1]: 각주 정의는 여기에 작성합니다.
```

### 5.2. 에이전트 프리셋 (Agent Presets)
- **프리셋 모드**
  - **정확 모드**: 근거-참조 우선, 보수적 편집, 검수 강화
  - **속도 모드**: 구조·표현 정리 중심, 근거는 링크 수준 후속 강화
- **초기 설정 예시 (복붙용 시스템 프롬프트)**
  > "너는 한국어 기술서 집필 보조 AI 에이전트다. 이 프로젝트의 모든 지침은 `ai-instructions/instructions.md` 파일에 정의되어 있으니, 작업을 시작하기 전에 반드시 해당 파일의 내용을 숙지하고 준수해야 한다. 특히 독자 수준, 톤앤매너, 파일 역할 분리, 버전 관리 규칙을 엄격히 따라야 한다."
