# ROADMAP ↔ TODO ↔ Session 연동 가이드

이 문서는 세 가지 레이어가 어떻게 연결되는지 설명합니다.

---

## 🎯 3-레이어 시스템

```
┌─────────────────────────────────────────────┐
│  ROADMAP (전략)                              │
│  - Phase 1, 2, 3...                         │
│  - 몇 주~몇 달 단위                           │
│  - 변경 빈도: 낮음                            │
└─────────────────┬───────────────────────────┘
                  │ 분해
                  ↓
┌─────────────────────────────────────────────┐
│  TODO (실행)                                 │
│  - 이번 주 할 일                             │
│  - ROADMAP에서 분해 + 즉흥 추가              │
│  - 변경 빈도: 매일                            │
└─────────────────┬───────────────────────────┘
                  │ 실제 작업
                  ↓
┌─────────────────────────────────────────────┐
│  Session (기록)                              │
│  - 오늘 실제로 한 것                         │
│  - 시간 순 일기                              │
│  - 변경 빈도: 실시간                          │
└─────────────────────────────────────────────┘
```

---

## 📋 연동 규칙

### Rule 1: ROADMAP → TODO (하향식 분해)

**ROADMAP에서:**
```markdown
### Phase 2: 기능 개발
- [ ] 2.1 - 사용자 인증
- [ ] 2.2 - 데이터베이스 설계
- [ ] 2.3 - API 구현
```

**TODO로 분해:**
```markdown
## ROADMAP 연계 작업

### Phase 2.1 - 사용자 인증
- [ ] JWT 토큰 구현 (예상: 3h)
- [ ] 로그인 API 작성 (예상: 2h)
- [ ] 테스트 코드 작성 (예상: 2h)
```

### Rule 2: TODO ← 즉흥 작업 (상향식 추가)

**작업 중 발견:**
```
세션에서:
"어? 이 파일 버그 있네. 고쳐야겠다"
```

**TODO에 즉시 추가:**
```markdown
## 즉흥 / 긴급 작업
- [ ] 파일명 버그 수정 (발견: 2025-10-06)
```

**복잡도 판단:**
- **간단** (< 30분): TODO에 추가 → 바로 처리
- **중간** (30분~2h): TODO에 추가 → 계획해서 처리
- **복잡** (> 2h): task-XXX 폴더 생성 → 상세 계획

### Rule 3: TODO → Session (실제 작업 기록)

**오전 - TODO 확인:**
```markdown
# TODO.md
- [ ] JWT 토큰 구현
```

**세션 시작:**
```markdown
# 세션 2025-10-06

## 관련 작업
- Phase 2.1-A: JWT 토큰 구현

## 이 세션에서 한 것
- [ ] JWT 라이브러리 조사
- [ ] 토큰 생성 함수 작성
- [ ] 테스트 케이스 작성
```

**작업 중:**
```markdown
## 이 세션에서 한 것
- [x] JWT 라이브러리 조사 (10:30 완료)
- [x] 토큰 생성 함수 작성 (12:00 완료)
- [ ] 테스트 케이스 작성 중...
```

**세션 종료:**
```markdown
## 다음 세션에서 할 것
1. 테스트 케이스 완성
2. JWT 갱신 로직 추가
```

### Rule 4: Session → TODO (역방향 업데이트)

**세션 완료 시:**
```
AI: "오늘 JWT 토큰 구현 완료했네요. TODO에도 체크할까요?"
사용자: "응"
```

**TODO 자동 업데이트:**
```markdown
## 완료된 작업

### 2025-10-06
- [x] JWT 토큰 구현 (소요: 4h) - [세션](../.session/2025-10-06.md)
```

---

## 🔄 실제 워크플로우

### 월요일 아침 (계획)

**1. ROADMAP 확인**
```
이번 주는 Phase 2.1 완료가 목표
```

**2. TODO 작성**
```markdown
## 이번 주 우선순위
1. [ ] JWT 토큰 구현
2. [ ] 로그인 API
3. [ ] 테스트 코드
```

**3. 첫 세션 시작**
```
AI: "이번 주 우선순위 1번 JWT부터 하시겠어요?"
```

### 화요일 오전 (즉흥 작업)

**1. 세션 진행 중**
```markdown
# 세션 2025-10-07
- [x] 로그인 API 작성 중...
```

**2. 버그 발견**
```
사용자: "어? 토큰 검증 로직에 버그 있네"
AI: "TODO에 추가할까요?"
```

**3. TODO 즉시 추가**
```markdown
## 즉흥 / 긴급 작업
- [ ] 토큰 검증 버그 수정 (발견: 2025-10-07 세션)
```

**4. 복잡도 판단**
```
AI: "예상 소요 시간은?"
사용자: "1시간?"
AI: "간단하네요. 지금 바로 할까요, 나중에 할까요?"
```

### 금요일 오후 (회고)

**1. 이번 주 완료 확인**
```markdown
## 완료된 작업
- [x] JWT 토큰 구현 (4h)
- [x] 로그인 API (3h)
- [x] 토큰 검증 버그 수정 (1h)
- [ ] 테스트 코드 (미완 - 다음 주)
```

**2. ROADMAP 업데이트**
```markdown
### Phase 2: 기능 개발
- [x] 2.1 - 사용자 인증 (80% 완료)
  - 테스트 코드 남음
```

**3. 다음 주 준비**
```markdown
## 다음 주 우선순위
1. [ ] Phase 2.1 마무리 (테스트)
2. [ ] Phase 2.2 시작 (DB 설계)
```

---

## 📊 작업 복잡도별 처리

### 간단한 작업 (< 30분)
```
발견 → TODO 추가 → 세션에서 바로 처리 → 완료 체크
```

**예시**: 오타 수정, 간단한 버그

### 중간 작업 (30분 ~ 2시간)
```
발견 → TODO 추가 → 세션 계획 → 다음 세션에서 처리
```

**예시**: 작은 기능 추가, 리팩토링

### 복잡한 작업 (> 2시간)
```
발견 → TODO 추가 → task-XXX 폴더 생성 → 상세 계획 → 여러 세션에 걸쳐 처리
```

**예시**: 새 기능, 아키텍처 변경

**task 폴더 생성:**
```
.work/tasks/task-042-token-validation/
├── context.md          # 배경, 목표, 요구사항
├── plan.md            # 상세 계획
└── artifacts/         # 산출물
```

---

## 🎯 핵심 원칙

### 1. 단방향 흐름 유지
```
ROADMAP → TODO → Session (기본)
Session → TODO (예외: 완료 시 업데이트)
```

### 2. 즉흥 작업도 TODO에
```
어떤 작업이든 TODO를 거쳐야 함
"세션에서만 하고 TODO 안 쓰기" ❌
```

### 3. 복잡도에 따른 차등 관리
```
간단: TODO만
중간: TODO + 세션 계획
복잡: TODO + task 폴더
```

### 4. 컨텍스트는 세션에
```
TODO: "뭘 할지"만
Session: "어떻게, 왜, 무슨 생각으로 했는지"
```

---

## 📝 체크리스트

### 새 Phase 시작 시
- [ ] ROADMAP에 Phase 추가
- [ ] Phase를 TODO 작업으로 분해
- [ ] 첫 세션에서 Phase 목표 확인

### 작업 중 즉흥 발견 시
- [ ] 복잡도 판단 (간단/중간/복잡)
- [ ] TODO에 추가
- [ ] 필요시 task 폴더 생성
- [ ] 세션에 발견 기록

### 세션 종료 시
- [ ] 완료 작업 TODO에 체크
- [ ] 세션 링크 추가
- [ ] 다음 세션 계획 작성
- [ ] ROADMAP 진행률 업데이트 (필요시)

### 주간 회고 시
- [ ] 완료된 TODO 정리
- [ ] ROADMAP 진행률 업데이트
- [ ] 다음 주 우선순위 설정
- [ ] 백로그 재조정

---

이 가이드를 따르면 AI와의 협업이 일관되고 추적 가능하게 유지됩니다.
